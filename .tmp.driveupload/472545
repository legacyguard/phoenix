var e,s,r,a,n,c,i,o,l=Object.defineProperty,d=Object.defineProperties,u=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,p=e=>{throw TypeError(e)},y=(e,s,t)=>s in e?l(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,g=(e,s)=>{for(var t in s||(s={}))h.call(s,t)&&y(e,t,s[t]);if(m)for(var t of m(s))x.call(s,t)&&y(e,t,s[t]);return e},j=(e,s)=>d(e,u(s)),f=(e,s,t)=>s.has(e)||p("Cannot "+t),v=(e,s,t)=>(f(e,s,"read from private field"),t?t.call(e):s.get(e)),b=(e,s,t)=>s.has(e)?p("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(e):s.set(e,t),N=(e,s,t,r)=>(f(e,s,"write to private field"),r?r.call(e,t):s.set(e,t),t),w=(e,s,t)=>(f(e,s,"access private method"),t),_=(e,s,t)=>new Promise((r,a)=>{var n=e=>{try{i(t.next(e))}catch(s){a(s)}},c=e=>{try{i(t.throw(e))}catch(s){a(s)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,c);i((t=t.apply(e,s)).next())});import{j as P}from"./vendor-ui-DOX-GngI.js";import{r as D}from"./vendor-react-BsuoGMue.js";import{o as k,a as S,C}from"./openai.service-C7QiwfYK.js";import{c as M,ag as O,ah as E,ai as A,aj as T,ak as R,al as F,am as I,an as z,p as L,S as W,q,Z as G,C as U,a as B,b as K,d as Q,e as V,h as Y,A as Z,n as $,Q as H,R as J,V as X,Y as ee,a1 as se,B as te,aa as re}from"./index-Co25CVR3.js";import{u as ae}from"./vendor-i18n-C5HfoztV.js";import{P as ne}from"./progress-cOZa_oNl.js";import{S as ce}from"./sparkles-6UQJxc-t.js";import{H as ie}from"./heart-BPRJ7DTV.js";import{U as oe}from"./upload-Bwf2qfmv.js";import{C as le}from"./clock-C7EaDSNX.js";import{f as de}from"./vendor-utils-DZ4dNBww.js";import"./vendor-ai-kPYoZGSZ.js";import"./vendor-auth-CQQWOfx5.js";import"./vendor-supabase-DjxWZ-e5.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=M("CloudOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]]),me=M("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var he=(o=class extends O{constructor(t,i){super(),b(this,n),b(this,e),b(this,s),b(this,r),b(this,a),N(this,e,t),this.setOptions(i),this.bindMethods(),w(this,n,c).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(s){var t;const a=this.options;this.options=v(this,e).defaultMutationOptions(s),E(this.options,a)||v(this,e).getMutationCache().notify({type:"observerOptionsUpdated",mutation:v(this,r),observer:this}),(null==a?void 0:a.mutationKey)&&this.options.mutationKey&&A(a.mutationKey)!==A(this.options.mutationKey)?this.reset():"pending"===(null==(t=v(this,r))?void 0:t.state.status)&&v(this,r).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||null==(e=v(this,r))||e.removeObserver(this)}onMutationUpdate(e){w(this,n,c).call(this),w(this,n,i).call(this,e)}getCurrentResult(){return v(this,s)}reset(){var e;null==(e=v(this,r))||e.removeObserver(this),N(this,r,void 0),w(this,n,c).call(this),w(this,n,i).call(this)}mutate(s,t){var n;return N(this,a,t),null==(n=v(this,r))||n.removeObserver(this),N(this,r,v(this,e).getMutationCache().build(v(this,e),this.options)),v(this,r).addObserver(this),v(this,r).execute(s)}},e=new WeakMap,s=new WeakMap,r=new WeakMap,a=new WeakMap,n=new WeakSet,c=function(){var e,t;const a=null!=(t=null==(e=v(this,r))?void 0:e.state)?t:T();N(this,s,j(g({},a),{isPending:"pending"===a.status,isSuccess:"success"===a.status,isError:"error"===a.status,isIdle:"idle"===a.status,mutate:this.mutate,reset:this.reset}))},i=function(e){R.batch(()=>{var t,r,n,c,i,o,l,d;if(v(this,a)&&this.hasListeners()){const u=v(this,s).variables,m=v(this,s).context;"success"===(null==e?void 0:e.type)?(null==(r=(t=v(this,a)).onSuccess)||r.call(t,e.data,u,m),null==(c=(n=v(this,a)).onSettled)||c.call(n,e.data,null,u,m)):"error"===(null==e?void 0:e.type)&&(null==(o=(i=v(this,a)).onError)||o.call(i,e.error,u,m),null==(d=(l=v(this,a)).onSettled)||d.call(l,void 0,e.error,u,m))}this.listeners.forEach(e=>{e(v(this,s))})})},o);function xe(e,s){const t=F(),[r]=D.useState(()=>new he(t,e));D.useEffect(()=>{r.setOptions(e)},[r,e]);const a=D.useSyncExternalStore(D.useCallback(e=>r.subscribe(R.batchCalls(e)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),n=D.useCallback((e,s)=>{r.mutate(e,s).catch(I)},[r]);if(a.error&&z(r.options.throwOnError,[a.error]))throw a.error;return j(g({},a),{mutate:n,mutateAsync:a.mutate})}function pe(){const[e,s]=D.useState(!1),[t,r]=D.useState(0),[a,n]=D.useState(""),[c,i]=D.useState(null),[o,l]=D.useState(null),[d,u]=D.useState(!0),m=D.useRef(!0);D.useEffect(()=>()=>{m.current=!1,k.terminate()},[]);const h=D.useCallback(e=>{m.current&&(r(e.progress),n(e.message))},[]),x=D.useCallback((e,...t)=>_(this,[e,...t],function*(e,t={}){i(null),l(null),s(!0),r(0),n("Starting document processing...");try{const a=j(g({},t),{localOnly:d||t.localOnly,preprocessImage:!1!==t.preprocessImage,onProgress:h}),i=yield k.extractTextFromImage(e,a);return m.current&&(l(i),s(!1),r(100),n("Document processed successfully!")),d&&i&&(yield function(e){return _(this,null,function*(){try{const s="LegacyGuardOCR",t="ocrResults",r=indexedDB.open(s,1);r.onupgradeneeded=e=>{const s=e.target.result;if(!s.objectStoreNames.contains(t)){const e=s.createObjectStore(t,{keyPath:"id",autoIncrement:!0});e.createIndex("timestamp","timestamp",{unique:!1}),e.createIndex("documentType","documentType.type",{unique:!1})}};const a=yield new Promise((e,s)=>{r.onsuccess=()=>e(r.result),r.onerror=()=>s(r.error)}),n=a.transaction([t],"readwrite").objectStore(t),c=j(g({},e),{id:Date.now()});yield new Promise((e,s)=>{const t=n.add(c);t.onsuccess=()=>e(),t.onerror=()=>s(t.error)}),a.close()}catch(c){}})}(i)),i}catch(a){const e=a;return m.current&&(i(e),s(!1),r(0),n("")),null}}),[d,h]);return{processDocument:x,isProcessing:e,progress:t,progressMessage:a,error:c,result:o,anonymizeText:D.useCallback((e,s={})=>k.anonymizeText(e,s),[]),reset:D.useCallback(()=>{s(!1),r(0),n(""),i(null),l(null)},[]),isPrivacyMode:d,setPrivacyMode:u}}function ye(){const[e,s]=D.useState(null),[t,r]=D.useState(null),[a,n]=D.useState(null),[c,i]=D.useState(null),[o,l]=D.useState(null),d=xe({mutationFn:e=>_(this,[e],function*({file:e,options:s}){const t=yield function(e){return _(this,null,function*(){return new Promise((s,t)=>{const r=new FileReader;r.readAsDataURL(e),r.onload=()=>{const e=r.result.split(",")[1];s(e)},r.onerror=e=>t(e)})})}(e),r=yield S.analyzeDocument(t,s);if(!r.success)throw r.error;return r.data}),onError:e=>{s(e)}}),u=xe({mutationFn:e=>_(this,[e],function*({profile:e,options:s}){const t=yield S.generateLifeQuestion(e,s);if(!t.success)throw t.error;return t.data}),onError:e=>{r(e)}}),m=xe({mutationFn:e=>_(this,[e],function*({context:e,options:s}){const t=yield S.suggestNextAction(e,s);if(!t.success)throw t.error;return t.data}),onError:e=>{n(e)}}),h=xe({mutationFn:e=>_(this,[e],function*({text:e,docType:s,options:t}){const r=yield S.extractDocumentMetadata(e,s,t);if(!r.success)throw r.error;return r.data}),onError:e=>{i(e)}}),x=xe({mutationFn:e=>_(this,[e],function*({scenario:e,tone:s}){const t=yield S.generateEmpatheticMessage(e,s);if(!t.success)throw t.error;return t.data}),onError:e=>{l(e)}}),p=D.useCallback((e,t)=>_(this,null,function*(){try{s(null);return(yield d.mutateAsync({file:e,options:t}))||null}catch(r){return null}}),[d]),y=D.useCallback((e,s)=>_(this,null,function*(){try{r(null);return(yield u.mutateAsync({profile:e,options:s}))||null}catch(t){return null}}),[u]),g=D.useCallback((e,s)=>_(this,null,function*(){try{n(null);return(yield m.mutateAsync({context:e,options:s}))||null}catch(t){return null}}),[m]),j=D.useCallback((e,s,t)=>_(this,null,function*(){try{i(null);return(yield h.mutateAsync({text:e,docType:s,options:t}))||null}catch(r){return null}}),[h]),f=D.useCallback((e,s="supportive")=>_(this,null,function*(){try{l(null);return(yield x.mutateAsync({scenario:e,tone:s}))||null}catch(t){return null}}),[x]),v=D.useCallback(()=>{S.clearCache()},[]),b=D.useCallback(()=>{s(null),r(null),n(null),i(null),l(null)},[]);return{analyzeDocument:p,isAnalyzing:d.isPending,analysisError:e,generateQuestion:y,isGeneratingQuestion:u.isPending,questionError:t,suggestAction:g,isSuggestingAction:m.isPending,suggestionError:a,extractMetadata:j,isExtractingMetadata:h.isPending,metadataError:c,generateMessage:f,isGeneratingMessage:x.isPending,messageError:o,clearCache:v,resetErrors:b}}function ge({isLocal:e,className:s,showDetails:t=!1}){const{t:r}=ae();return P.jsx("div",{className:L("flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium transition-all",e?"bg-green-100 text-green-800 border border-green-200":"bg-blue-100 text-blue-800 border border-blue-200",s),children:e?P.jsxs(P.Fragment,{children:[P.jsx(W,{className:"h-4 w-4"}),P.jsx(q,{className:"h-3.5 w-3.5"}),P.jsx("span",{children:r("privacy.processingLocal")}),t&&P.jsx(ue,{className:"h-4 w-4 ml-1"})]}):P.jsxs(P.Fragment,{children:[P.jsx(C,{className:"h-4 w-4"}),P.jsx("span",{children:r("privacy.enhancedWithAI")})]})})}function je({isPrivacyMode:e,onToggle:s,className:t}){const{t:r}=ae();return P.jsxs("div",{className:L("flex items-center space-x-3",t),children:[P.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[P.jsx("input",{type:"checkbox",checked:e,onChange:e=>s(e.target.checked),className:"sr-only peer"}),P.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"}),P.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:r("privacy.privacyMode")})]}),P.jsx("div",{className:"text-xs text-gray-500",children:e?P.jsxs("span",{className:"flex items-center gap-1",children:[P.jsx(q,{className:"h-3 w-3"}),r("privacy.allProcessingLocal")]}):P.jsxs("span",{className:"flex items-center gap-1",children:[P.jsx(C,{className:"h-3 w-3"}),r("privacy.aiAssistanceEnabled")]})})]})}function fe({progress:e,message:s,isVisible:r,className:a}){if(!r)return null;return P.jsx("div",{className:L("w-full max-w-md mx-auto p-6 bg-white rounded-lg shadow-sm border transition-all duration-300",r?"opacity-100 scale-100":"opacity-0 scale-95",a),children:P.jsxs("div",{className:"space-y-4",children:[P.jsxs("div",{className:"flex items-center space-x-3",children:[P.jsx("div",{className:"flex-shrink-0",children:e<20?P.jsx(G,{className:"h-5 w-5 text-blue-600"}):e<80?P.jsx(ce,{className:"h-5 w-5 text-purple-600 animate-pulse"}):P.jsx(ie,{className:"h-5 w-5 text-green-600"})}),P.jsxs("div",{className:"flex-1",children:[P.jsx("h3",{className:"text-sm font-medium text-gray-900",children:s}),P.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:e<10?"Getting everything ready for you...":e<30?"Your document is in good hands...":e<60?"Working through the details carefully...":e<90?"Almost finished organizing everything...":100===e?"All done! Your document is ready.":"Taking care of your important information..."})]})]}),P.jsx(ne,{value:e,className:"h-2"}),P.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-500",children:[P.jsxs("span",{children:[e,t("oCRProgress.complete_1")]}),e>0&&e<100&&P.jsx("span",{className:"animate-pulse",children:t("oCRProgress.please_wait_2")})]})]})})}function ve({documentType:e,confidence:s,language:r,className:a}){return P.jsxs("div",{className:L("space-y-2",a),children:[e&&P.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[P.jsx(G,{className:"h-4 w-4 text-gray-400"}),P.jsx("span",{className:"text-gray-600",children:t("oCRProgress.detected_3")}),P.jsx("span",{className:"font-medium text-gray-900",children:(i=e,{insurance_policy:"Insurance Policy",bank_statement:"Bank Statement",property_deed:"Property Deed",identity_card:"Identity Card",passport:"Passport",will:"Will",medical_record:"Medical Record",contract:"Contract",invoice:"Invoice",receipt:"Receipt",unknown:"Document"}[i]||"Document")})]}),r&&P.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[P.jsx("span",{className:"text-gray-600",children:t("oCRProgress.language_4")}),P.jsx("span",{className:"font-medium text-gray-900",children:(c=r,{cs:"Czech",sk:"Slovak",en:"English",other:"Other"}[c]||c)})]}),void 0!==s&&P.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[P.jsx("span",{className:"text-gray-600",children:t("oCRProgress.quality_5")}),P.jsxs("span",{className:L("font-medium",s>=80?"text-green-600":s>=70?"text-yellow-600":"text-orange-600"),children:[Math.round(s),"%"]}),P.jsxs("span",{className:"text-gray-500 text-xs",children:["- ",(n=s,n>=90?"Excellent quality scan!":n>=80?"Good quality document.":n>=70?"Readable document.":"The scan quality could be better, but we got the important parts.")]})]})]});var n,c,i}function be(){var e,s,r,a,n;const{processDocument:c,isProcessing:i,progress:o,progressMessage:l,error:d,result:u,anonymizeText:m,isPrivacyMode:h,setPrivacyMode:x,reset:p}=pe(),{analyzeDocument:y,analysisError:g}=ye(),[j,f]=D.useState(null),[v,b]=D.useState(!1),[N,w]=D.useState(null),k=()=>{if(!u)return null;return`Processed in ${(u.processingTime/1e3).toFixed(1)} seconds`};return P.jsxs(U,{className:"w-full max-w-4xl mx-auto",children:[P.jsx(B,{children:P.jsxs("div",{className:"flex items-center justify-between",children:[P.jsxs("div",{children:[P.jsx(K,{children:t("ocr.hybridDocumentProcessor.hybrid_document_processor_1")}),P.jsx(Q,{children:t("ocr.hybridDocumentProcessor.process_documents_locally_with_2")})]}),P.jsx(ge,{isLocal:h})]})}),P.jsxs(V,{className:"space-y-6",children:[P.jsx(je,{isPrivacyMode:h,onToggle:x}),P.jsxs("div",{className:"border-2 border-dashed rounded-lg p-6 text-center",children:[P.jsx("input",{type:"file",accept:t("ocr.hybridDocumentProcessor.image_3"),onChange:e=>{var s;const t=null==(s=e.target.files)?void 0:s[0];t&&t.type.startsWith("image/")&&(f(t),p(),w(null))},className:"hidden",id:"ocr-file-upload"}),P.jsxs("label",{htmlFor:"ocr-file-upload",className:"cursor-pointer flex flex-col items-center space-y-2",children:[P.jsx(oe,{className:"h-8 w-8 text-muted-foreground"}),P.jsx("span",{className:"text-sm text-muted-foreground",children:t("ocr.hybridDocumentProcessor.click_to_upload_a_document_ima_4")}),P.jsx("span",{className:"text-xs text-gray-500",children:t("ocr.hybridDocumentProcessor.supports_czech_slovak_and_engl_5")})]}),j&&P.jsx("p",{className:"mt-2 text-sm font-medium",children:j.name})]}),j&&!u&&P.jsx(Y,{onClick:()=>_(this,null,function*(){if(!j)return;const e=yield c(j,{localOnly:h,preprocessImage:!0});if(e&&!h&&e.documentType&&e.documentType.confidence<.8){m(e.text,{preserveStructure:!0,preserveDates:!0,preserveAmounts:!0});const s=yield y(j);s&&w(s)}}),disabled:i,className:"w-full",children:i?P.jsx(P.Fragment,{children:t("ocr.hybridDocumentProcessor.processing_6")}):P.jsxs(P.Fragment,{children:[P.jsx(G,{className:"mr-2 h-4 w-4"}),t("ocr.hybridDocumentProcessor.process_document_7")]})}),P.jsx(fe,{progress:o,message:l,isVisible:i}),(d||g)&&P.jsx(Z,{variant:"destructive",children:P.jsx($,{children:(null==d?void 0:d.userMessage)||(null==g?void 0:g.userMessage)})}),u&&P.jsxs("div",{className:"space-y-4",children:[P.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-3",children:[P.jsx(ve,{documentType:null==(e=u.documentType)?void 0:e.type,confidence:(null==(s=u.documentType)?void 0:s.confidence)?100*u.documentType.confidence:void 0,language:u.language}),k()&&P.jsx("p",{className:"text-xs text-gray-500",children:k()})]}),P.jsxs(H,{defaultValue:"summary",className:"w-full",children:[P.jsxs(J,{className:"grid w-full grid-cols-3",children:[P.jsxs(X,{value:"summary",children:[P.jsx(W,{className:"mr-2 h-4 w-4"}),"Summary"]}),P.jsxs(X,{value:"extracted",children:[P.jsx(G,{className:"mr-2 h-4 w-4"}),t("ocr.hybridDocumentProcessor.extracted_data_8")]}),N&&P.jsxs(X,{value:"enhanced",children:[P.jsx(ce,{className:"mr-2 h-4 w-4"}),t("ocr.hybridDocumentProcessor.ai_enhanced_9")]})]}),P.jsx(ee,{value:"summary",className:"space-y-4",children:P.jsxs("div",{className:"prose prose-sm max-w-none",children:[P.jsx("h4",{children:t("ocr.hybridDocumentProcessor.document_overview_10")}),P.jsxs("p",{children:[t("ocr.hybridDocumentProcessor.we_successfully_read_your_11"),null==(r=u.documentType)?void 0:r.type.replace(/_/g," "),t("ocr.hybridDocumentProcessor.document_12"),(null==(a=u.structuredData)?void 0:a.issueDate)&&P.jsxs(P.Fragment,{children:[t("ocr.hybridDocumentProcessor.the_document_was_issued_on_13"),new Date(u.structuredData.issueDate).toLocaleDateString(),"."]})]}),P.jsxs("div",{className:"mt-4",children:[P.jsxs("div",{className:"flex items-center justify-between mb-2",children:[P.jsx("h4",{className:"text-sm font-medium",children:t("ocr.hybridDocumentProcessor.document_text_14")}),P.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>b(!v),children:v?P.jsxs(P.Fragment,{children:[P.jsx(me,{className:"mr-2 h-4 w-4"}),t("ocr.hybridDocumentProcessor.hide_text_15")]}):P.jsxs(P.Fragment,{children:[P.jsx(se,{className:"mr-2 h-4 w-4"}),t("ocr.hybridDocumentProcessor.show_text_16")]})})]}),v&&P.jsx("div",{className:"bg-white border rounded p-4 text-xs font-mono whitespace-pre-wrap max-h-64 overflow-y-auto",children:u.text})]})]})}),P.jsx(ee,{value:"extracted",className:"space-y-4",children:u.structuredData?P.jsx("div",{className:"space-y-3",children:Object.entries(u.structuredData).map(([e,s])=>null==s?null:P.jsxs("div",{className:"flex justify-between py-2 border-b",children:[P.jsxs("span",{className:"text-sm text-gray-600 capitalize",children:[e.replace(/([A-Z])/g," $1").trim(),":"]}),P.jsx("span",{className:"text-sm font-medium",children:Array.isArray(s)?s.join(", "):"object"==typeof s?JSON.stringify(s,null,2):String(s)})]},e))}):P.jsx("p",{className:"text-sm text-gray-500",children:t("ocr.hybridDocumentProcessor.no_structured_data_could_be_ex_17")})}),N&&P.jsxs(ee,{value:"enhanced",className:"space-y-4",children:[P.jsxs(Z,{className:"bg-blue-50 border-blue-200",children:[P.jsx(ce,{className:"h-4 w-4 text-blue-600"}),P.jsx($,{className:"text-blue-800",children:t("ocr.hybridDocumentProcessor.ai_enhancement_was_applied_to__18")})]}),P.jsxs("div",{className:"space-y-3",children:[P.jsx("h4",{className:"font-medium",children:t("ocr.hybridDocumentProcessor.ai_insights_19")}),null==(n=N.suggestions)?void 0:n.map((e,s)=>P.jsxs("div",{className:"flex items-start space-x-2",children:[P.jsx("span",{className:"text-green-600",children:"â€¢"}),P.jsx("span",{className:"text-sm",children:e})]},s))]})]})]}),h&&P.jsxs(Z,{className:"bg-green-50 border-green-200",children:[P.jsx(W,{className:"h-4 w-4 text-green-600"}),P.jsx($,{className:"text-green-800",children:t("ocr.hybridDocumentProcessor.this_document_was_processed_en_20")})]})]})]})]})}function Ne(){const{t:e}=ae(),{results:s}=function(){const[e,s]=D.useState([]),[t,r]=D.useState(!0);D.useEffect(()=>{a()},[]);const a=()=>_(this,null,function*(){try{const e="LegacyGuardOCR",t="ocrResults",r=indexedDB.open(e,1),a=yield new Promise((e,s)=>{r.onsuccess=()=>e(r.result),r.onerror=()=>s(r.error)}),n=a.transaction([t],"readonly").objectStore(t).getAll(),c=yield new Promise((e,s)=>{n.onsuccess=()=>e(n.result),n.onerror=()=>s(n.error)});a.close(),c.sort((e,s)=>new Date(s.timestamp).getTime()-new Date(e.timestamp).getTime()),s(c)}catch(e){}finally{r(!1)}});return{results:e,isLoading:t,refresh:a}}();return P.jsxs("div",{className:"container mx-auto py-8 space-y-8",children:[P.jsxs("div",{className:"text-center space-y-4",children:[P.jsx("h1",{className:"text-4xl font-bold",children:e("demo.ocr.title")}),P.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:e("demo.ocr.subtitle")}),P.jsxs("div",{className:"flex flex-wrap justify-center gap-3 mt-4",children:[P.jsxs(te,{variant:"secondary",className:"px-3 py-1",children:[P.jsx(W,{className:"mr-1 h-3 w-3"}),e("demo.ocr.badge.localProcessing")]}),P.jsxs(te,{variant:"secondary",className:"px-3 py-1",children:[P.jsx(re,{className:"mr-1 h-3 w-3"}),e("demo.ocr.badge.languageSupport")]}),P.jsxs(te,{variant:"secondary",className:"px-3 py-1",children:[P.jsx(G,{className:"mr-1 h-3 w-3"}),e("demo.ocr.badge.smartDetection")]})]})]}),P.jsx(be,{}),s.length>0&&P.jsxs(U,{children:[P.jsxs(B,{children:[P.jsx(K,{children:e("demo.ocr.previousDocuments.title")}),P.jsx(Q,{children:e("demo.ocr.previousDocuments.description")})]}),P.jsx(V,{children:P.jsx("div",{className:"space-y-3",children:s.slice(0,5).map((s,t)=>{var r;return P.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[P.jsxs("div",{className:"flex items-center space-x-3",children:[P.jsx(G,{className:"h-5 w-5 text-gray-400"}),P.jsxs("div",{children:[P.jsx("p",{className:"font-medium text-sm",children:(null==(r=s.documentType)?void 0:r.type.replace(/_/g," "))||e("demo.ocr.unknownDocument")}),P.jsx("p",{className:"text-xs text-gray-500",children:"cs"===s.language?e("demo.ocr.language.czech"):"sk"===s.language?e("demo.ocr.language.slovak"):"en"===s.language?e("demo.ocr.language.english"):e("demo.ocr.language.other")})]})]}),P.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500",children:[P.jsx(le,{className:"h-3 w-3"}),P.jsx("span",{children:de(new Date(s.timestamp),"MMM d, h:mm a")})]})]},t)})})})]}),P.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[P.jsxs(U,{children:[P.jsxs(B,{children:[P.jsx(W,{className:"h-8 w-8 text-green-600 mb-2"}),P.jsx(K,{className:"text-lg",children:e("demo.ocr.features.completePrivacy")})]}),P.jsx(V,{children:P.jsx("p",{className:"text-sm text-gray-600",children:e("demo.ocr.privacyDescription")})})]}),P.jsxs(U,{children:[P.jsxs(B,{children:[P.jsx(re,{className:"h-8 w-8 text-blue-600 mb-2"}),P.jsx(K,{className:"text-lg",children:e("demo.ocr.features.multiLanguage")})]}),P.jsx(V,{children:P.jsx("p",{className:"text-sm text-gray-600",children:e("demo.ocr.languageDescription")})})]}),P.jsxs(U,{children:[P.jsxs(B,{children:[P.jsx(G,{className:"h-8 w-8 text-purple-600 mb-2"}),P.jsx(K,{className:"text-lg",children:e("demo.ocr.features.smartDetection")})]}),P.jsx(V,{children:P.jsx("p",{className:"text-sm text-gray-600",children:e("demo.ocr.detectionDescription")})})]})]}),P.jsxs("div",{className:"text-center text-sm text-muted-foreground space-y-2",children:[P.jsx("p",{children:e("demo.ocr.privacyNotice.local")}),P.jsx("p",{children:e("demo.ocr.privacyNotice.ai")})]})]})}export{Ne as OCRDemo};

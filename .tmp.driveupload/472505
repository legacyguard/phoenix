var e=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,i=(t,s,a)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a,l=(e,t)=>{for(var s in t||(t={}))n.call(t,s)&&i(e,s,t[s]);if(r)for(var s of r(t))o.call(t,s)&&i(e,s,t[s]);return e},c=(e,t)=>s(e,a(t)),d=(e,t,s)=>new Promise((a,r)=>{var n=e=>{try{i(s.next(e))}catch(t){r(t)}},o=e=>{try{i(s.throw(e))}catch(t){r(t)}},i=e=>e.done?a(e.value):Promise.resolve(e.value).then(n,o);i((s=s.apply(e,t)).next())});import{j as u}from"./vendor-ui-DOX-GngI.js";import{r as m,R as p}from"./vendor-react-BsuoGMue.js";import{c as h,s as y,ao as g,ap as x,p as f,h as j,Z as v,C as w,a5 as N,X as b,i as D,aq as C,j as S,B as _,q as k,U as P,a1 as E,a0 as F,S as z,a as A,b as T,d as M,e as R,L as I,_ as U,Q as $,R as L,V as O,Y as W,A as B,n as q}from"./index-Co25CVR3.js";import{P as V}from"./progress-cOZa_oNl.js";import{o as G,a as H,C as K}from"./openai.service-C7QiwfYK.js";import{u as Q}from"./vendor-i18n-C5HfoztV.js";import{U as J}from"./upload-Bwf2qfmv.js";import{S as Y}from"./sparkles-6UQJxc-t.js";import{C as Z}from"./circle-x-CEnMZa5N.js";import{H as X}from"./hard-drive-D9JjiseQ.js";import{C as ee}from"./calendar-D4lLPC52.js";import{S as te}from"./share-2-1bZWggv4.js";import{T as se}from"./trash-2-C1c6TJwX.js";import{f as ae}from"./vendor-utils-DZ4dNBww.js";import{H as re}from"./heart-BPRJ7DTV.js";import"./vendor-auth-CQQWOfx5.js";import"./vendor-supabase-DjxWZ-e5.js";import"./vendor-ai-kPYoZGSZ.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=h("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);function oe(){return d(this,null,function*(){return crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"])})}function ie(e,t){return d(this,null,function*(){const s=yield e.arrayBuffer(),a=crypto.getRandomValues(new Uint8Array(12)),r=yield crypto.subtle.encrypt({name:"AES-GCM",iv:a},t,s),n=yield ce(s);return{encryptedData:r,encryptionMethod:"AES-GCM",iv:a,metadata:{originalName:e.name,mimeType:e.type,size:e.size,checksum:n}}})}function le(e,t){return d(this,null,function*(){try{const s=yield crypto.subtle.decrypt({name:"AES-GCM",iv:e.iv},t,e.encryptedData);return new File([s],e.metadata.originalName,{type:e.metadata.mimeType})}catch(s){throw new Error("Failed to decrypt file. The key might be incorrect.")}})}function ce(e){return d(this,null,function*(){const t=yield crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(e=>e.toString(16).padStart(2,"0")).join("")})}function de(e,t){return d(this,null,function*(){const s=yield function(e){return d(this,null,function*(){const t=yield crypto.subtle.exportKey("raw",e);return btoa(String.fromCharCode(...new Uint8Array(t)))})}(t),a=yield me(),r=a.transaction(["keys"],"readwrite").objectStore("keys");yield new Promise((t,a)=>{const n=r.put({documentId:e,key:s,createdAt:new Date});n.onsuccess=()=>t(),n.onerror=()=>a(n.error)}),a.close()})}function ue(e){return d(this,null,function*(){const t=yield me(),s=t.transaction(["keys"],"readonly").objectStore("keys"),a=yield new Promise((t,a)=>{const r=s.get(e);r.onsuccess=()=>t(r.result),r.onerror=()=>a(r.error)});return t.close(),a?function(e){return d(this,null,function*(){const t=Uint8Array.from(atob(e),e=>e.charCodeAt(0));return crypto.subtle.importKey("raw",t,"AES-GCM",!0,["encrypt","decrypt"])})}(a.key):null})}function me(){return d(this,null,function*(){return new Promise((e,t)=>{const s=indexedDB.open("LegacyGuardKeys",1);s.onupgradeneeded=e=>{const t=e.target.result;if(!t.objectStoreNames.contains("keys")){t.createObjectStore("keys",{keyPath:"documentId"}).createIndex("createdAt","createdAt",{unique:!1})}},s.onsuccess=()=>e(s.result),s.onerror=()=>t(s.error)})})}const pe=new class{storeDocument(e,t,s){return d(this,null,function*(){try{return"local"!==s.location&&"both"!==s.location||(yield this.storeLocal(e,t,s.encrypt)),"cloud"!==s.location&&"both"!==s.location||(yield this.storeCloud(e,t,s.encrypt)),{success:!0}}catch(a){return{success:!1,error:a instanceof Error?a.message:"Storage failed"}}})}storeLocal(e,t,s){return d(this,null,function*(){const a=yield this.openDatabase();let r,n=null;s?(n=yield oe(),yield de(t.id,n),r=yield ie(e,n)):r=yield e.arrayBuffer();const o=a.transaction(["documents"],"readwrite").objectStore("documents");yield new Promise((e,a)=>{const n=o.put({id:t.id,document:t,fileData:r,encrypted:s,storedAt:new Date});n.onsuccess=()=>e(),n.onerror=()=>a(n.error)}),a.close()})}storeCloud(e,t,s){return d(this,null,function*(){var a;let r=e,n=null;if(s){n=yield oe();const s=yield ie(e,n);r=new File([s.encryptedData],`${t.id}.encrypted`,{type:"application/octet-stream"}),yield this.storeCloudEncryptionMetadata(t.id,{iv:Array.from(s.iv),method:s.encryptionMethod,originalName:e.name,originalType:e.type}),yield de(t.id,n)}const{error:o}=yield y.storage.from("documents").upload(`${t.id}/${r.name}`,r,{cacheControl:"3600",upsert:!1});if(o)throw new Error(`Upload failed: ${o.message}`);const{error:i}=yield y.from("documents").insert({id:t.id,user_id:null==(a=(yield y.auth.getUser()).data.user)?void 0:a.id,file_name:t.originalName,display_name:t.displayName,document_type:t.type,category:t.category,file_size:t.size,mime_type:t.metadata.mimeType,encrypted:s,ocr_text:t.ocrText,extracted_data:t.extractedData,ai_analysis:t.aiAnalysis,metadata:t.metadata,thumbnail:t.thumbnail,storage_location:"cloud"});if(i)throw new Error(`Database error: ${i.message}`)})}storeCloudEncryptionMetadata(e,t){return d(this,null,function*(){const{error:s}=yield y.from("document_encryption").insert({document_id:e,encryption_metadata:t});if(s)throw new Error(`Failed to store encryption metadata: ${s.message}`)})}retrieveDocument(e,t){return d(this,null,function*(){try{return"local"===t?yield this.retrieveLocal(e):yield this.retrieveCloud(e)}catch(s){return null}})}retrieveLocal(e){return d(this,null,function*(){const t=yield this.openDatabase(),s=t.transaction(["documents"],"readonly").objectStore("documents"),a=yield new Promise((t,a)=>{const r=s.get(e);r.onsuccess=()=>t(r.result),r.onerror=()=>a(r.error)});if(t.close(),!a)return null;if(a.encrypted){const t=yield ue(e);if(!t)throw new Error("Encryption key not found");return yield le(a.fileData,t)}return new File([a.fileData],a.document.originalName,{type:a.document.metadata.mimeType})})}retrieveCloud(e){return d(this,null,function*(){const{data:t,error:s}=yield y.from("documents").select("*").eq("id",e).single();if(s||!t)throw new Error("Document not found");const a=t.encrypted?`${e}.encrypted`:t.file_name,{data:r,error:n}=yield y.storage.from("documents").download(`${e}/${a}`);if(n||!r)throw new Error("Failed to download file");if(t.encrypted){const{data:s}=yield y.from("document_encryption").select("encryption_metadata").eq("document_id",e).single();if(!s)throw new Error("Encryption metadata not found");const a=yield ue(e);if(!a)throw new Error("Encryption key not found");const n={encryptedData:yield r.arrayBuffer(),encryptionMethod:s.encryption_metadata.method,iv:new Uint8Array(s.encryption_metadata.iv),metadata:{originalName:s.encryption_metadata.originalName,mimeType:s.encryption_metadata.originalType,size:t.file_size,checksum:""}};return yield le(n,a)}return new File([r],t.file_name,{type:t.mime_type})})}deleteDocument(e,t){return d(this,null,function*(){try{return"local"!==t&&"both"!==t||(yield this.deleteLocal(e)),"cloud"!==t&&"both"!==t||(yield this.deleteCloud(e)),{success:!0}}catch(s){return{success:!1,error:s instanceof Error?s.message:"Delete failed"}}})}deleteLocal(e){return d(this,null,function*(){const t=yield this.openDatabase(),s=t.transaction(["documents"],"readwrite").objectStore("documents");yield new Promise((t,a)=>{const r=s.delete(e);r.onsuccess=()=>t(),r.onerror=()=>a(r.error)}),t.close()})}deleteCloud(e){return d(this,null,function*(){const{error:t}=yield y.storage.from("documents").remove([`${e}/`]),{error:s}=yield y.from("documents").delete().eq("id",e);if(s)throw new Error(`Database deletion error: ${s.message}`);yield y.from("document_encryption").delete().eq("document_id",e)})}openDatabase(){return d(this,null,function*(){return new Promise((e,t)=>{const s=indexedDB.open("LegacyGuardDocuments",1);s.onupgradeneeded=e=>{const t=e.target.result;if(!t.objectStoreNames.contains("documents")){const e=t.createObjectStore("documents",{keyPath:"id"});e.createIndex("storedAt","storedAt",{unique:!1}),e.createIndex("category","document.category",{unique:!1})}},s.onsuccess=()=>e(s.result),s.onerror=()=>t(s.error)})})}getStorageStats(){return d(this,null,function*(){let e=0,t=0;try{const t=yield this.openDatabase(),s=t.transaction(["documents"],"readonly"),a=s.objectStore("documents").count();e=yield new Promise(e=>{a.onsuccess=()=>e(a.result)}),t.close()}catch(a){}let s=0;try{const{count:e,data:a}=yield y.from("documents").select("file_size",{count:"exact"});s=e||0,a&&(t=a.reduce((e,t)=>e+(t.file_size||0),0))}catch(a){}return{localCount:e,cloudCount:s,totalSize:t}})}},he=["image/jpeg","image/png","image/webp","image/heic","image/heif"],ye=[...he,"application/pdf"],ge=52428800;function xe(e){return e<1024?e+" bytes":e<1048576?(e/1024).toFixed(1)+" KB":(e/1048576).toFixed(1)+" MB"}function fe(e){return d(this,null,function*(){return e.type.startsWith("image/")?new Promise(t=>{const s=new Image,a=URL.createObjectURL(e);s.onload=()=>{URL.revokeObjectURL(a);s.width<200||s.height<200?t({valid:!1,width:s.width,height:s.height,error:"Image is too small for reliable text extraction. Try a higher resolution photo."}):t({valid:!0,width:s.width,height:s.height})},s.onerror=()=>{URL.revokeObjectURL(a),t({valid:!1,error:"Could not read image dimensions. The file might be corrupted."})},s.src=a}):{valid:!0}})}const je={maxWidth:2400,maxHeight:3200,quality:.85,format:"jpeg"};function ve(e,t,s,a){if(e<=s&&t<=a)return{width:e,height:t};const r=e/t;let n=e,o=t;return n>s&&(n=s,o=n/r),o>a&&(o=a,n=o*r),{width:Math.round(n),height:Math.round(o)}}function we(e,t=200){return d(this,null,function*(){return new Promise((s,a)=>{const r=new Image,n=document.createElement("canvas"),o=n.getContext("2d");if(o)if(r.onload=()=>{const{width:e,height:a}=ve(r.width,r.height,t,t);n.width=e,n.height=a,o.imageSmoothingEnabled=!0,o.imageSmoothingQuality="high",o.drawImage(r,0,0,e,a),s(n.toDataURL("image/jpeg",.7))},r.onerror=()=>{a(new Error("Failed to generate thumbnail"))},e.type.startsWith("image/")){const t=new FileReader;t.onload=e=>{var t;r.src=null==(t=e.target)?void 0:t.result},t.onerror=()=>{a(new Error("Failed to read file"))},t.readAsDataURL(e)}else"application/pdf"===e.type?s(function(){const e=document.createElement("canvas"),t=e.getContext("2d");return t?(e.width=200,e.height=200,t.fillStyle="#DC2626",t.fillRect(0,0,200,200),t.fillStyle="white",t.font="bold 80px Arial",t.textAlign="center",t.textBaseline="middle",t.fillText("PDF",100,100),e.toDataURL()):""}()):s(function(){const e=document.createElement("canvas"),t=e.getContext("2d");if(!t)return"";e.width=200,e.height=200,t.fillStyle="#6B7280",t.fillRect(0,0,200,200),t.fillStyle="white",t.fillRect(30,20,140,160),t.strokeStyle="#E5E7EB",t.lineWidth=2;for(let s=0;s<5;s++)t.beginPath(),t.moveTo(50,50+25*s),t.lineTo(150,50+25*s),t.stroke();return e.toDataURL()}());else a(new Error("Could not get canvas context"))})})}const Ne=new class{uploadDocument(e){return d(this,arguments,function*(e,t={}){var s,a,r,n,o;const i=g(),l=Date.now();try{null==(s=t.onProgress)||s.call(t,{stage:"validating",progress:10,message:"Checking your document...",emoji:"ðŸ”"});const c=yield this.validateDocument(e);if(!c.valid)throw this.createError("validation_failed",c.errors[0].message,c.errors[0].userMessage,"validating",c.errors[0].recoverable);const d=yield this.processDocumentPipeline(e,t),u={id:i,originalName:e.name,displayName:this.generateDisplayName(e.name,d.documentType),type:d.documentType,category:this.categorizeDocument(d.documentType),size:d.compressedFile.size,uploadedAt:new Date,storageLocation:t.privacy||"cloud",encryptionStatus:!1!==t.encrypt?"encrypted":"unencrypted",thumbnail:d.thumbnail,ocrText:d.ocrText,extractedData:d.extractedData,aiAnalysis:d.aiAnalysis,metadata:{mimeType:d.compressedFile.type,lastModified:new Date(e.lastModified),dimensions:d.dimensions,checksum:yield this.calculateFileChecksum(d.compressedFile),processingTime:Date.now()-l,ocrConfidence:d.ocrConfidence,documentDate:null==(a=d.extractedData)?void 0:a.issueDate,expiryDate:null==(r=d.extractedData)?void 0:r.expiryDate,importantDates:this.extractImportantDates(d.extractedData)}};null==(n=t.onProgress)||n.call(t,{stage:"storing",progress:80,message:"Keeping your document safe...",emoji:"ðŸ”’"});if(!(yield pe.storeDocument(d.compressedFile,u,{location:t.privacy||"cloud",encrypt:!1!==t.encrypt,generateBackup:!0,familyVault:t.familySharing})).success)throw this.createError("storage_failed","Failed to store document","I couldn't save your document. Please try again.","storing",!0);const m=yield this.generateFamilySummary(u);return null==(o=t.onProgress)||o.call(t,{stage:"complete",progress:100,message:`Your ${this.getDocumentTypeDisplay(u.type)} is secure!`,emoji:"âœ…"}),{id:i,status:"success",document:u,summary:m}}catch(c){return{id:i,status:"failed",error:c}}})}processDocumentPipeline(e,t){return d(this,null,function*(){var s,a,r,n,o;const i={};if(!1!==t.compress&&e.type.startsWith("image/")?(null==(s=t.onProgress)||s.call(t,{stage:"compressing",progress:20,message:"Optimizing your document...",emoji:"ðŸ“¦"}),i.compressedFile=yield function(e){return d(this,arguments,function*(e,t={}){if(!e.type.startsWith("image/"))return e;const s=l(l({},je),t);return new Promise((t,a)=>{const r=new Image,n=document.createElement("canvas"),o=n.getContext("2d");if(!o)return void a(new Error("Could not get canvas context"));r.onload=()=>{const{width:i,height:l}=ve(r.width,r.height,s.maxWidth,s.maxHeight);n.width=i,n.height=l,o.imageSmoothingEnabled=!0,o.imageSmoothingQuality="high",o.drawImage(r,0,0,i,l),n.toBlob(r=>{if(!r)return void a(new Error("Failed to compress image"));const n=new File([r],e.name,{type:`image/${s.format}`,lastModified:Date.now()});n.size<e.size?t(n):t(e)},`image/${s.format}`,s.quality)},r.onerror=()=>{a(new Error("Failed to load image for compression"))};const i=new FileReader;i.onload=e=>{var t;r.src=null==(t=e.target)?void 0:t.result},i.onerror=()=>{a(new Error("Failed to read file"))},i.readAsDataURL(e)})})}(e)):i.compressedFile=e,!1!==t.generateThumbnail&&(i.thumbnail=yield we(i.compressedFile)),e.type.startsWith("image/")){const e=yield fe(i.compressedFile);i.dimensions=e.width&&e.height?{width:e.width,height:e.height}:void 0}if(!1!==t.processOCR){null==(a=t.onProgress)||a.call(t,{stage:"reading",progress:40,message:"Reading your document...",emoji:"ðŸ“–"});const e=yield G.extractTextFromImage(i.compressedFile,{localOnly:"local"===t.privacy,preprocessImage:!0});i.ocrText=e.text,i.ocrConfidence=e.confidence,i.documentType=(null==(r=e.documentType)?void 0:r.type)||"unknown",i.extractedData=e.structuredData}if(!1!==t.analyzeWithAI&&"local"!==t.privacy&&i.ocrConfidence<80){null==(n=t.onProgress)||n.call(t,{stage:"analyzing",progress:60,message:"Understanding your document better...",emoji:"ðŸ¤–"});const e=yield H.analyzeDocument(yield this.fileToBase64(i.compressedFile));e.success&&(i.aiAnalysis=e.data,(null==(o=e.data)?void 0:o.confidence)>i.ocrConfidence/100&&(i.documentType=e.data.type))}return i})}validateDocument(e){return d(this,null,function*(){const t=function(e){const t=[],s=[],a=[];return e.size>ge?t.push({code:"file_too_large",message:`File size ${xe(e.size)} exceeds ${xe(ge)} limit`,userMessage:"This file is quite large. Would you like me to compress it for you?",recoverable:!0}):e.size>10485760&&s.push({code:"large_file",message:`File size is ${xe(e.size)}`,suggestion:"This might take a moment to process. I can compress it to speed things up."}),e.type.startsWith("image/")&&e.size<10240&&s.push({code:"low_quality",message:"File size is very small",suggestion:"This image might be low quality. Try taking a clearer photo if text is hard to read."}),ye.includes(e.type)||("application/vnd.openxmlformats-officedocument.wordprocessingml.document"===e.type?(t.push({code:"unsupported_format",message:"Word documents not directly supported",userMessage:"I can't read Word documents directly. Could you save it as a PDF first?",recoverable:!1}),a.push('Open the document in Word and use "Save as PDF"')):t.push({code:"invalid_type",message:`File type ${e.type} not supported`,userMessage:"I can only process images (JPEG, PNG) and PDFs right now.",recoverable:!1})),function(e){const t=[".exe",".bat",".cmd",".scr",".vbs",".js"],s=e.toLowerCase();return t.some(e=>s.endsWith(e))||s.includes("virus")||s.includes("malware")}(e.name)&&t.push({code:"virus_detected",message:"Suspicious file name detected",userMessage:"This file name looks suspicious. Please check it's from a trusted source.",recoverable:!1}),0===e.size&&t.push({code:"corrupted",message:"File appears to be empty",userMessage:"This file seems to be empty or corrupted. Try uploading it again?",recoverable:!0}),"application/pdf"===e.type&&0===s.length?a.push("PDFs work great! I'll extract all the text for you."):he.includes(e.type)&&0===t.length&&a.push("I'll enhance this image for better text recognition."),{valid:0===t.length,errors:t,warnings:s,suggestions:a}}(e);if(e.type.startsWith("image/")){const s=yield fe(e);s.valid||(t.errors.push({code:"invalid_type",message:s.error||"Invalid image dimensions",userMessage:s.error||"This image might be too small.",recoverable:!1}),t.valid=!1)}return t})}generateDisplayName(e,t){const s=(new Date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),a=this.getDocumentTypeDisplay(t),r=e.replace(/\.[^/.]+$/,"");return"unknown"!==t?`${a} - ${s}`:`${r} - ${s}`}getDocumentTypeDisplay(e){return{insurance_policy:"Insurance Policy",bank_statement:"Bank Statement",property_deed:"Property Deed",identity_card:"ID Card",passport:"Passport",will:"Will",medical_record:"Medical Record",contract:"Contract",invoice:"Invoice",receipt:"Receipt",unknown:"Document"}[e]||"Document"}categorizeDocument(e){return{insurance_policy:"finance",bank_statement:"finance",property_deed:"home",identity_card:"identity",passport:"identity",will:"legal",medical_record:"health",contract:"legal",invoice:"finance",receipt:"finance"}[e]||"other"}extractImportantDates(e){const t=[];return(null==e?void 0:e.issueDate)&&t.push(new Date(e.issueDate)),(null==e?void 0:e.expiryDate)&&t.push(new Date(e.expiryDate)),t}generateFamilySummary(e){return d(this,null,function*(){var t;const s=this.getDocumentTypeDisplay(e.type),a={title:`${s} Added`,description:`A ${s.toLowerCase()} has been securely stored in your family vault.`,keyPoints:[],relatedDocuments:[],suggestedActions:[]};if(e.metadata.expiryDate){const t=Math.floor((e.metadata.expiryDate.getTime()-Date.now())/864e5);t<90&&(a.keyPoints.push(`âš ï¸ Expires in ${t} days`),a.suggestedActions.push("Set a reminder to renew this document"))}switch(e.type){case"insurance_policy":a.relatedDocuments=["Medical Records","Bank Statements"],a.suggestedActions.push("Review beneficiaries annually"),a.familyMessage="This insurance policy helps protect our family's future.";break;case"will":a.relatedDocuments=["Power of Attorney","Insurance Policies"],a.suggestedActions.push("Inform your executor about this update"),a.familyMessage="Your wishes have been safely recorded for your loved ones.";break;case"property_deed":a.relatedDocuments=["Insurance Policy","Tax Documents"],a.suggestedActions.push("Update home insurance if needed"),a.familyMessage="Your property documents are organized and secure."}return e.extractedData&&((null==(t=e.extractedData.parties)?void 0:t.length)>0&&a.keyPoints.push(`Involves: ${e.extractedData.parties.join(", ")}`),e.extractedData.amount&&a.keyPoints.push(`Amount: ${e.extractedData.currency||"$"}${e.extractedData.amount.toLocaleString()}`)),a})}fileToBase64(e){return d(this,null,function*(){return new Promise((t,s)=>{const a=new FileReader;a.onload=()=>{const e=a.result;t(e.split(",")[1])},a.onerror=s,a.readAsDataURL(e)})})}calculateFileChecksum(e){return d(this,null,function*(){return ce(yield e.arrayBuffer())})}createError(e,t,s,a,r){return{code:e,message:t,userMessage:s,stage:a,recoverable:r}}};function be(){const[e,t]=m.useState([]),[s,a]=m.useState(!1),[r,n]=m.useState(""),[o,i]=m.useState([]),u=m.useRef(0),p=m.useRef(!0),h=m.useRef(null);m.useEffect(()=>()=>{p.current=!1},[]);const y=0===e.length?0:Math.round(e.reduce((e,t)=>e+t.progress,0)/e.length),g=e.filter(e=>"completed"===e.status).length,x=e.filter(e=>"failed"===e.status).length,f=m.useCallback(e=>d(this,null,function*(){var s;if(p.current){t(t=>t.map(t=>t.id===e.id?c(l({},t),{status:"processing",startedAt:new Date}):t)),n(e.file.name);try{const s=s=>{p.current&&t(t=>t.map(t=>t.id===e.id?c(l({},t),{progress:s.progress,currentStage:s.stage}):t))},a=yield Ne.uploadDocument(e.file,c(l({},e.options),{onProgress:s}));if(!p.current)return;t(t=>t.map(t=>t.id===e.id?c(l({},t),{status:"success"===a.status?"completed":"failed",result:a,completedAt:new Date,progress:100,error:a.error}):t)),a.error&&i(t=>[...t,{id:e.id,error:a.error}])}catch(a){if(!p.current)return;const s={code:"unexpected_error",message:a instanceof Error?a.message:"Unknown error",userMessage:"Something went wrong. Please try again.",stage:"validating",recoverable:!0};t(t=>t.map(t=>t.id===e.id?c(l({},t),{status:"failed",error:s,completedAt:new Date}):t)),i(t=>[...t,{id:e.id,error:s}])}finally{u.current--,p.current&&(n(""),null==(s=h.current)||s.call(h))}}}),[]),j=m.useCallback(()=>{if(u.current>=3)return;const t=e.find(e=>"pending"===e.status);t&&(u.current++,f(t))},[e,f]);m.useEffect(()=>{h.current=j},[j]);const v=m.useCallback((e,...s)=>d(this,[e,...s],function*(e,s={}){const r=e.map(e=>({id:`${Date.now()}-${Math.random()}`,file:e,status:"pending",progress:0,retryCount:0,addedAt:new Date,options:s}));t(e=>[...e,...r]),a(!0),j()}),[j]),w=m.useCallback((e,...t)=>d(this,[e,...t],function*(e,t={}){return Ne.uploadDocument(e,t)}),[]),N=m.useCallback(s=>d(this,null,function*(){const a=e.find(e=>e.id===s);a&&"failed"===a.status&&(t(e=>e.map(e=>e.id===s?c(l({},e),{status:"pending",progress:0,error:void 0,retryCount:e.retryCount+1}):e)),i(e=>e.filter(e=>e.id!==s)),j())}),[e,j]),b=m.useCallback(e=>{t(t=>t.map(t=>t.id===e&&"pending"===t.status?c(l({},t),{status:"cancelled"}):t))},[]),D=m.useCallback(()=>{t(e=>e.filter(e=>"completed"!==e.status&&"cancelled"!==e.status))},[]);return m.useEffect(()=>{const t=e.some(e=>"pending"===e.status||"processing"===e.status);a(t)},[e]),{upload:v,uploadSingle:w,uploadQueue:e,overallProgress:y,currentProcessing:r,retry:N,cancel:b,clearCompleted:D,isUploading:s,errors:o,successCount:g,failureCount:x}}function De(){const[e,t]=m.useState({privacy:"cloud",autoCompress:!0,autoEncrypt:!0,processOCR:!0,analyzeWithAI:!0,generateThumbnail:!0,familySharing:!1}),s=m.useCallback((e,s)=>{t(t=>c(l({},t),{[e]:s}))},[]);return m.useEffect(()=>{const e=localStorage.getItem("uploadPreferences");if(e)try{t(JSON.parse(e))}catch(s){}},[]),m.useEffect(()=>{localStorage.setItem("uploadPreferences",JSON.stringify(e))},[e]),{preferences:e,updatePreference:s}}function Ce({onUploadStart:e,className:t,maxFiles:s=x.maxFiles,acceptedTypes:a=x.acceptedTypes}){const{t:r}=Q("common"),[n,o]=m.useState(!1),[i,l]=m.useState(0),c=m.useRef(null),{upload:p}=be(),{preferences:h}=De(),y=m.useCallback(t=>d(this,null,function*(){const r=t.slice(0,s).filter(e=>a.some(t=>{if(t.endsWith("/*")){const s=t.replace("/*","");return e.type.startsWith(s)}return e.type===t}));0!==r.length&&(null==e||e(),yield p(r,{privacy:h.privacy,compress:h.autoCompress,encrypt:h.autoEncrypt,processOCR:h.processOCR,analyzeWithAI:h.analyzeWithAI,generateThumbnail:h.generateThumbnail,familySharing:h.familySharing}))}),[s,a,p,h,e]),g=m.useCallback(e=>{var t;e.preventDefault(),e.stopPropagation(),l(e=>e+1),(null==(t=e.dataTransfer)?void 0:t.items)&&e.dataTransfer.items.length>0&&o(!0)},[]),w=m.useCallback(e=>{e.preventDefault(),e.stopPropagation(),l(e=>e-1),i-1==0&&o(!1)},[i]),N=m.useCallback(e=>{e.preventDefault(),e.stopPropagation()},[]),b=m.useCallback(e=>{e.preventDefault(),e.stopPropagation(),o(!1),l(0);const t=Array.from(e.dataTransfer.files);t.length>0&&y(t)},[y]),D=m.useCallback(e=>{const t=Array.from(e.target.files||[]);t.length>0&&y(t)},[y]),C=m.useCallback(()=>{var e;null==(e=c.current)||e.click()},[]),S=m.useCallback(()=>{c.current&&(c.current.capture="environment",c.current.click())},[]);return u.jsxs("div",{"data-testid":"upload-zone",className:f("relative rounded-xl border-2 border-dashed transition-all duration-200",n?"border-primary bg-primary/5 scale-[1.02]":"border-gray-300 hover:border-gray-400",t),onDragEnter:g,onDragLeave:w,onDragOver:N,onDrop:b,children:[u.jsx("input",{ref:c,"data-testid":"file-input",type:"file",multiple:!0,accept:a.join(","),onChange:D,className:"hidden","aria-label":r("upload.smartUploadZone.file_upload_1")}),u.jsxs("div",{className:"p-8 sm:p-12 text-center",children:[u.jsxs("div",{className:"mx-auto mb-6 relative",children:[u.jsx("div",{className:f("w-20 h-20 rounded-full bg-primary/10 flex items-center justify-center transition-all",n&&"scale-110 bg-primary/20"),children:u.jsx(J,{className:f("h-10 w-10 text-primary transition-all",n&&"scale-110")})}),n&&u.jsx(Y,{className:"absolute -top-2 -right-2 h-6 w-6 text-primary animate-pulse"})]}),u.jsx("h3",{className:"text-lg font-semibold mb-2",children:r(n?"upload.zone.dropHereActive":"upload.zone.dropHere")}),u.jsx("p",{className:"text-sm text-muted-foreground mb-6 max-w-sm mx-auto",children:r(n?"upload.zone.descriptionActive":"upload.zone.description")}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[u.jsxs(j,{onClick:C,variant:"default",className:"gap-2",children:[u.jsx(v,{className:"h-4 w-4"}),r("upload.zone.chooseFiles")]}),u.jsxs(j,{onClick:S,variant:"outline",className:"gap-2 sm:hidden",children:[u.jsx(ne,{className:"h-4 w-4"}),r("upload.zone.takePhoto")]})]}),u.jsxs("p",{className:"text-xs text-muted-foreground mt-6",children:[r("upload.smartUploadZone.supports_images_jpeg_png_and_p_2"),s,r("upload.smartUploadZone.files_at_once_3")]}),"local"===h.privacy&&u.jsxs("div",{className:"mt-4 inline-flex items-center gap-2 px-3 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium",children:[u.jsx("div",{className:"w-2 h-2 bg-green-600 rounded-full"}),r("upload.zone.processingLocally")]})]}),n&&u.jsx("div",{className:"absolute inset-0 bg-primary/5 backdrop-blur-sm rounded-xl flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx(J,{className:"h-12 w-12 text-primary mx-auto mb-3 animate-bounce"}),u.jsx("p",{className:"text-lg font-semibold text-primary",children:r("upload.zone.dragOverlay.title")}),u.jsx("p",{className:"text-sm text-primary/70",children:r("upload.zone.dragOverlay.subtitle")})]})})]})}function Se({item:e,onRetry:s,onCancel:a,className:r}){var n,o;return u.jsx(w,{className:f("p-4 transition-all duration-200",(()=>{switch(e.status){case"completed":return"bg-green-50 border-green-200";case"failed":return"bg-red-50 border-red-200";case"processing":return"bg-blue-50 border-blue-200";default:return"bg-gray-50 border-gray-200"}})(),r),children:u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[(()=>{switch(e.status){case"completed":return u.jsx(S,{className:"h-5 w-5 text-green-600"});case"failed":return u.jsx(Z,{className:"h-5 w-5 text-red-600"});case"processing":return u.jsx(C,{className:"h-5 w-5 text-blue-600 animate-spin"});default:return u.jsx(v,{className:"h-5 w-5 text-gray-400"})}})(),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"font-medium text-sm truncate",children:e.file.name}),u.jsxs("p",{className:"text-xs text-muted-foreground",children:[(e.file.size/1024/1024).toFixed(2)," MB"]})]})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:["failed"===e.status&&s&&u.jsx(j,{variant:"ghost",size:"sm",onClick:()=>s(e.id),className:"h-8 px-2",children:u.jsx(N,{className:"h-4 w-4"})}),"pending"===e.status&&a&&u.jsx(j,{variant:"ghost",size:"sm",onClick:()=>a(e.id),className:"h-8 px-2",children:u.jsx(b,{className:"h-4 w-4"})})]})]}),("processing"===e.status||"pending"===e.status)&&u.jsxs(u.Fragment,{children:[u.jsx(V,{value:e.progress,className:"h-2"}),u.jsx("p",{className:"text-xs text-muted-foreground",children:(()=>{if(!e.currentStage)return"Waiting to start...";return{validating:"ðŸ” Checking your document...",compressing:"ðŸ“¦ Making it smaller for you...",reading:"ðŸ“– Reading your document...",analyzing:"ðŸ¤– Understanding what this is...",encrypting:"ðŸ” Securing your information...",storing:"ðŸ’¾ Keeping it safe...",complete:"âœ… All done!"}[e.currentStage]||"Processing..."})()})]}),"failed"===e.status&&e.error&&u.jsxs("div",{className:"flex items-start space-x-2 pt-1",children:[u.jsx(D,{className:"h-4 w-4 text-red-600 mt-0.5 flex-shrink-0"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"text-sm text-red-800",children:e.error.userMessage}),e.error.recoverable&&u.jsx("p",{className:"text-xs text-red-600 mt-1",children:t("upload.uploadProgress.don_t_worry_you_can_try_again_1")})]})]}),"completed"===e.status&&(null==(n=e.result)?void 0:n.document)&&u.jsxs("div",{className:"pt-1",children:[u.jsxs("p",{className:"text-sm text-green-800",children:[e.result.document.displayName,t("upload.uploadProgress.is_now_secure_2")]}),(null==(o=e.result.summary)?void 0:o.familyMessage)&&u.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["ðŸ’š ",e.result.summary.familyMessage]})]}),e.retryCount>0&&u.jsxs("p",{className:"text-xs text-muted-foreground",children:[t("upload.uploadProgress.retry_attempt_3"),e.retryCount]})]})})}function _e({items:e,onRetry:s,onCancel:a,onClearCompleted:r,className:n}){if(0===e.length)return null;const o=e.filter(e=>"completed"===e.status).length,i=o>0;return u.jsxs("div",{className:f("space-y-4",n),children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("h3",{className:"text-sm font-medium",children:["Uploading ",e.length," ",1===e.length?"document":"documents"]}),i&&r&&u.jsxs(j,{variant:"ghost",size:"sm",onClick:r,className:"text-xs",children:[t("upload.uploadProgress.clear_completed_4"),o,")"]})]}),u.jsx("div",{className:"space-y-3",children:e.map(e=>u.jsx(Se,{item:e,onRetry:s,onCancel:a},e.id))})]})}function ke({document:e,onView:s,onDownload:a,onShare:r,onDelete:n,className:o}){var i;const l=e.metadata.expiryDate,c=l&&new Date(e.metadata.expiryDate)<new Date,d=l&&!c&&new Date(e.metadata.expiryDate)<new Date(Date.now()+2592e6);return u.jsx(w,{className:f("overflow-hidden hover:shadow-lg transition-shadow",o),children:u.jsxs("div",{className:"p-4 space-y-4",children:[u.jsxs("div",{className:"flex space-x-4",children:[e.thumbnail?u.jsx("img",{src:e.thumbnail,alt:e.displayName,className:"w-20 h-20 object-cover rounded-lg border"}):u.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-lg flex items-center justify-center",children:u.jsx(v,{className:"h-8 w-8 text-gray-400"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h3",{className:"font-semibold text-sm truncate",children:e.displayName}),u.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[u.jsxs(_,{variant:"secondary",className:"text-xs",children:[{home:"ðŸ ",family:"ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦",finance:"ðŸ’°",health:"ðŸ¥",legal:"âš–ï¸",identity:"ðŸ†”",other:"ðŸ“„"}[e.category]||"ðŸ“„"," ",e.category]}),"encrypted"===e.encryptionStatus&&u.jsxs(_,{variant:"outline",className:"text-xs",children:[u.jsx(k,{className:"h-3 w-3 mr-1"}),"Encrypted"]})]}),u.jsx("div",{className:"flex items-center gap-1 mt-2 text-xs text-muted-foreground",children:"local"===e.storageLocation?u.jsxs(u.Fragment,{children:[u.jsx(X,{className:"h-3 w-3"}),u.jsx("span",{children:t("upload.documentPreview.on_device_1")})]}):"cloud"===e.storageLocation?u.jsxs(u.Fragment,{children:[u.jsx(K,{className:"h-3 w-3"}),u.jsx("span",{children:"Cloud"})]}):u.jsxs(u.Fragment,{children:[u.jsx(X,{className:"h-3 w-3"}),u.jsx(K,{className:"h-3 w-3"}),u.jsx("span",{children:"Both"})]})})]})]}),(e.metadata.documentDate||l)&&u.jsxs("div",{className:"space-y-2",children:[e.metadata.documentDate&&u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx(ee,{className:"h-3 w-3 text-muted-foreground"}),u.jsxs("span",{children:[t("upload.documentPreview.issued_2"),ae(new Date(e.metadata.documentDate),"MMM d, yyyy")]})]}),l&&u.jsxs("div",{className:f("flex items-center gap-2 text-xs",c&&"text-red-600",d&&"text-orange-600"),children:[u.jsx(D,{className:"h-3 w-3"}),u.jsxs("span",{children:[c?"Expired":"Expires",": ",ae(new Date(e.metadata.expiryDate),"MMM d, yyyy")]})]})]}),e.metadata.relatedPeople&&e.metadata.relatedPeople.length>0&&u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx(P,{className:"h-3 w-3 text-muted-foreground"}),u.jsxs("span",{className:"text-muted-foreground",children:[e.metadata.relatedPeople.slice(0,2).join(", "),e.metadata.relatedPeople.length>2&&` +${e.metadata.relatedPeople.length-2} more`]})]}),u.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t",children:[s&&u.jsxs(j,{variant:"ghost",size:"sm",onClick:s,className:"flex-1",children:[u.jsx(E,{className:"h-4 w-4 mr-1"}),"View"]}),a&&u.jsxs(j,{variant:"ghost",size:"sm",onClick:a,className:"flex-1",children:[u.jsx(F,{className:"h-4 w-4 mr-1"}),"Download"]}),r&&u.jsxs(j,{variant:"ghost",size:"sm",onClick:r,className:"flex-1",children:[u.jsx(te,{className:"h-4 w-4 mr-1"}),"Share"]}),n&&u.jsx(j,{variant:"ghost",size:"sm",onClick:n,className:"text-red-600 hover:text-red-700",children:u.jsx(se,{className:"h-4 w-4"})})]}),(null==(i=e.sharingStatus)?void 0:i.isShared)&&u.jsx("div",{className:"bg-blue-50 rounded-lg p-2 text-xs",children:u.jsxs("div",{className:"flex items-center gap-2 text-blue-800",children:[u.jsx(te,{className:"h-3 w-3"}),u.jsxs("span",{children:[t("upload.documentPreview.shared_with_3"),e.sharingStatus.sharedWith.length,1===e.sharingStatus.sharedWith.length?" person":" people"]})]})})]})})}function Pe({documents:e,onView:s,onDownload:a,onShare:r,onDelete:n,className:o}){return 0===e.length?u.jsxs("div",{className:"text-center py-12",children:[u.jsx(v,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-500",children:t("upload.documentPreview.no_documents_uploaded_yet_4")}),u.jsx("p",{className:"text-sm text-gray-400 mt-1",children:t("upload.documentPreview.drop_some_files_above_to_get_s_5")})]}):u.jsx("div",{className:f("grid gap-4 sm:grid-cols-2 lg:grid-cols-3",o),children:e.map(e=>u.jsx(ke,{document:e,onView:s?()=>s(e):void 0,onDownload:a?()=>a(e):void 0,onShare:r?()=>r(e):void 0,onDelete:n?()=>n(e):void 0},e.id))})}function Ee(){const{t:e}=Q(),{uploadQueue:t,overallProgress:s,retry:a,cancel:r,clearCompleted:n,isUploading:o,successCount:i,failureCount:l}=be(),{preferences:c,updatePreference:h}=De(),[y,g]=m.useState([]),[x,f]=m.useState({localCount:0,cloudCount:0,totalSize:0});p.useEffect(()=>{v()},[i]);const v=()=>d(this,null,function*(){const e=yield pe.getStorageStats();f(e)});p.useEffect(()=>{const e=t.filter(e=>{var t;return"completed"===e.status&&(null==(t=e.result)?void 0:t.document)}).map(e=>e.result.document);g(t=>[...t,...e])},[i,t]);return u.jsxs("div",{className:"container mx-auto py-8 space-y-8",children:[u.jsxs("div",{className:"text-center space-y-4",children:[u.jsx("h1",{className:"text-4xl font-bold",children:e("demo.upload.title")}),u.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:e("demo.upload.subtitle")}),u.jsxs("div",{className:"flex flex-wrap justify-center gap-3 mt-4",children:[u.jsxs(_,{variant:"secondary",className:"px-3 py-1",children:[u.jsx(z,{className:"mr-1 h-3 w-3"}),e("demo.upload.badge.encryption")]}),u.jsxs(_,{variant:"secondary",className:"px-3 py-1",children:[u.jsx(Y,{className:"mr-1 h-3 w-3"}),e("demo.upload.badge.aiAnalysis")]}),u.jsxs(_,{variant:"secondary",className:"px-3 py-1",children:[u.jsx(re,{className:"mr-1 h-3 w-3"}),e("demo.upload.badge.familySharing")]})]})]}),u.jsxs(w,{children:[u.jsxs(A,{children:[u.jsx(T,{children:e("demo.upload.settings.title")}),u.jsx(M,{children:e("demo.upload.settings.description")})]}),u.jsx(R,{children:u.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx(I,{children:e("demo.upload.settings.storageLocation")}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs(j,{variant:"local"===c.privacy?"default":"outline",size:"sm",onClick:()=>h("privacy","local"),className:"flex-1",children:[u.jsx(X,{className:"h-4 w-4 mr-1"}),e("demo.upload.settings.local")]}),u.jsxs(j,{variant:"cloud"===c.privacy?"default":"outline",size:"sm",onClick:()=>h("privacy","cloud"),className:"flex-1",children:[u.jsx(K,{className:"h-4 w-4 mr-1"}),e("demo.upload.settings.cloud")]})]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx(I,{htmlFor:"compress",className:"text-sm",children:e("demo.upload.features.autoCompress")}),u.jsx(U,{id:"compress",checked:c.autoCompress,onCheckedChange:e=>h("autoCompress",e)})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx(I,{htmlFor:"encrypt",className:"text-sm",children:e("demo.upload.features.autoEncrypt")}),u.jsx(U,{id:"encrypt",checked:c.autoEncrypt,onCheckedChange:e=>h("autoEncrypt",e)})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx(I,{htmlFor:"ocr",className:"text-sm",children:e("demo.upload.features.processOCR")}),u.jsx(U,{id:"ocr",checked:c.processOCR,onCheckedChange:e=>h("processOCR",e)})]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx(I,{htmlFor:"ai",className:"text-sm",children:e("demo.upload.features.aiAnalysis")}),u.jsx(U,{id:"ai",checked:c.analyzeWithAI,onCheckedChange:e=>h("analyzeWithAI",e),disabled:"local"===c.privacy})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx(I,{htmlFor:"family",className:"text-sm",children:e("demo.upload.features.familySharing")}),u.jsx(U,{id:"family",checked:c.familySharing,onCheckedChange:e=>h("familySharing",e)})]})]})]})})]}),u.jsxs($,{defaultValue:"upload",className:"w-full",children:[u.jsxs(L,{className:"grid w-full grid-cols-3",children:[u.jsx(O,{value:"upload",children:e("demo.upload.tabs.upload")}),u.jsxs(O,{value:"documents",children:[e("demo.upload.tabs.documents")," (",y.length,")"]}),u.jsx(O,{value:"stats",children:e("demo.upload.tabs.stats")})]}),u.jsxs(W,{value:"upload",className:"space-y-6",children:[u.jsx(Ce,{onUploadStart:()=>{}}),t.length>0&&u.jsxs(w,{children:[u.jsxs(A,{children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx(T,{className:"text-lg",children:e("demo.upload.progress.title")}),u.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[u.jsxs("span",{className:"text-green-600",children:["âœ“ ",e("demo.upload.progress.completed",{count:i})]}),l>0&&u.jsxs("span",{className:"text-red-600",children:["âœ— ",e("demo.upload.progress.failed",{count:l})]})]})]}),o&&u.jsx(V,{value:s,className:"mt-2"})]}),u.jsx(R,{children:u.jsx(_e,{items:t,onRetry:a,onCancel:r,onClearCompleted:n})})]})]}),u.jsx(W,{value:"documents",className:"space-y-6",children:u.jsx(Pe,{documents:y,onView:e=>{},onDownload:e=>{},onShare:e=>{},onDelete:e=>{}})}),u.jsxs(W,{value:"stats",className:"space-y-6",children:[u.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[u.jsxs(w,{children:[u.jsx(A,{children:u.jsx(T,{className:"text-sm font-medium",children:e("demo.upload.stats.localStorage.title")})}),u.jsxs(R,{children:[u.jsx("div",{className:"text-2xl font-bold",children:x.localCount}),u.jsx("p",{className:"text-xs text-muted-foreground",children:e("demo.upload.stats.localStorage.description")})]})]}),u.jsxs(w,{children:[u.jsx(A,{children:u.jsx(T,{className:"text-sm font-medium",children:e("demo.upload.stats.cloudStorage.title")})}),u.jsxs(R,{children:[u.jsx("div",{className:"text-2xl font-bold",children:x.cloudCount}),u.jsx("p",{className:"text-xs text-muted-foreground",children:e("demo.upload.stats.cloudStorage.description")})]})]}),u.jsxs(w,{children:[u.jsx(A,{children:u.jsx(T,{className:"text-sm font-medium",children:e("demo.upload.stats.totalSize.title")})}),u.jsxs(R,{children:[u.jsxs("div",{className:"text-2xl font-bold",children:[(x.totalSize/1024/1024).toFixed(1)," MB"]}),u.jsx("p",{className:"text-xs text-muted-foreground",children:e("demo.upload.stats.totalSize.description")})]})]})]}),u.jsxs(w,{children:[u.jsx(A,{children:u.jsx(T,{children:e("demo.upload.stats.processingStats.title")})}),u.jsx(R,{className:"space-y-4",children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{children:e("demo.upload.stats.processingStats.documentsProcessed")}),u.jsx("span",{className:"font-medium",children:i+l})]}),u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{children:e("demo.upload.stats.successRate")}),u.jsxs("span",{className:"font-medium",children:[i+l>0?Math.round(i/(i+l)*100):0,"%"]})]}),u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{children:e("demo.upload.stats.averageTime")}),u.jsx("span",{className:"font-medium",children:e("demo.upload.stats.averageTimeValue")})]})]})})]})]})]}),u.jsxs(B,{children:[u.jsx(z,{className:"h-4 w-4"}),u.jsx(q,{children:"local"===c.privacy?u.jsxs(u.Fragment,{children:[u.jsx("strong",{children:e("demo.upload.privacy.localMode.title")})," ",e("demo.upload.privacy.localMode.description")]}):u.jsxs(u.Fragment,{children:[u.jsx("strong",{children:e("demo.upload.privacy.cloudMode.title")})," ",e("demo.upload.privacy.cloudMode.description")]})})]})]})}export{Ee as UploadDemo};
